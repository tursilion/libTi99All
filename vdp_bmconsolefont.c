
#include "vdp.h"

#ifdef TI99
// room for the patterns of the displayable characters - not needed on Coleco
// TODO: maybe we can rework the TI code to pull from GROM instead of buffering in RAM?
unsigned char bmFont[BM_FONT_SIZE];
#endif
#ifdef CLASSIC99
// copy of chara1
//
// Data file chara1_min - Dec 11, 2009
//
// starts at character 32

const unsigned char CHARA1[] = {
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x10,0x10,0x10,0x00,0x10,0x00,	// ................ //
	0x28,0x28,0x28,0x00,0x00,0x00,0x00,0x00,0x00,0x28,0x7C,0x28,0x28,0x7C,0x28,0x00,	// (((......(|((|(. //
	0x10,0x3C,0x50,0x38,0x14,0x78,0x10,0x00,0x00,0x44,0x4C,0x18,0x30,0x64,0x44,0x00,	// .<P8.x...DL.0dD. //
	0x00,0x20,0x50,0x20,0x54,0x48,0x34,0x00,0x08,0x10,0x20,0x00,0x00,0x00,0x00,0x00,	// . P TH4... ..... //
	0x08,0x10,0x20,0x20,0x20,0x10,0x08,0x00,0x20,0x10,0x08,0x08,0x08,0x10,0x20,0x00,	// ..   ... ..... . //
	0x44,0x28,0x7C,0x28,0x44,0x00,0x00,0x00,0x00,0x10,0x10,0x7C,0x10,0x10,0x00,0x00,	// D(|(D......|.... //
	0x00,0x00,0x00,0x00,0x00,0x30,0x10,0x20,0x00,0x00,0x00,0x7C,0x00,0x00,0x00,0x00,	// .....0. ...|.... //
	0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x04,0x08,0x10,0x20,0x40,0x00,0x00,	// .....00..... @.. //
	0x38,0x44,0x4C,0x54,0x54,0x64,0x38,0x00,0x10,0x30,0x10,0x10,0x10,0x10,0x38,0x00,	// 8DLTTd8..0....8. //
	0x38,0x44,0x44,0x08,0x10,0x20,0x7C,0x00,0x7C,0x08,0x10,0x08,0x04,0x44,0x38,0x00,	// 8DD.. |.|....D8. //
	0x08,0x18,0x28,0x48,0x7C,0x08,0x08,0x00,0x78,0x40,0x40,0x78,0x04,0x44,0x38,0x00,	// ..(H|...x@@x.D8. //
	0x38,0x40,0x40,0x78,0x44,0x44,0x38,0x00,0x7C,0x04,0x04,0x08,0x10,0x20,0x20,0x00,	// 8@@xDD8.|....  . //
	0x38,0x44,0x44,0x38,0x44,0x44,0x38,0x00,0x38,0x44,0x44,0x44,0x3C,0x04,0x78,0x00,	// 8DD8DD8.8DDD<.x. //
	0x00,0x00,0x30,0x30,0x00,0x30,0x30,0x00,0x00,0x00,0x30,0x30,0x00,0x30,0x10,0x20,	// ..00.00...00.0.  //
	0x00,0x00,0x10,0x20,0x40,0x20,0x10,0x00,0x00,0x00,0x00,0x7C,0x00,0x7C,0x00,0x00,	// ... @ .....|.|.. //
	0x00,0x00,0x10,0x08,0x04,0x08,0x10,0x00,0x00,0x38,0x44,0x08,0x10,0x00,0x10,0x00,	// .........8D..... //
	0x00,0x38,0x44,0x54,0x58,0x40,0x3C,0x00,0x38,0x44,0x44,0x7C,0x44,0x44,0x44,0x00,	// .8DTX@<.8DD|DDD. //
	0x78,0x44,0x44,0x78,0x44,0x44,0x78,0x00,0x38,0x44,0x40,0x40,0x40,0x44,0x38,0x00,	// xDDxDDx.8D@@@D8. //
	0x78,0x24,0x24,0x24,0x24,0x24,0x38,0x00,0x7C,0x40,0x40,0x78,0x40,0x40,0x7C,0x00,	// x$$$$$8.|@@x@@|. //
	0x7C,0x40,0x40,0x78,0x40,0x40,0x40,0x00,0x38,0x44,0x44,0x40,0x4C,0x44,0x38,0x00,	// |@@x@@@.8DD@LD8. //
	0x44,0x44,0x44,0x7C,0x44,0x44,0x44,0x00,0x38,0x10,0x10,0x10,0x10,0x10,0x38,0x00,	// DDD|DDD.8.....8. //
	0x04,0x04,0x04,0x04,0x04,0x44,0x38,0x00,0x44,0x48,0x50,0x70,0x48,0x44,0x44,0x00,	// .....D8.DHPpHDD. //
	0x40,0x40,0x40,0x40,0x40,0x40,0x7C,0x00,0x44,0x6C,0x54,0x44,0x44,0x44,0x44,0x00,	// @@@@@@|.DlTDDDD. //
	0x44,0x44,0x64,0x54,0x4C,0x44,0x44,0x00,0x38,0x44,0x44,0x44,0x44,0x44,0x38,0x00,	// DDdTLDD.8DDDDD8. //
	0x78,0x44,0x44,0x44,0x78,0x40,0x40,0x00,0x38,0x44,0x44,0x44,0x54,0x4C,0x3C,0x00,	// xDDDx@@.8DDDTL<. //
	0x78,0x44,0x44,0x78,0x50,0x48,0x44,0x00,0x3C,0x40,0x40,0x38,0x04,0x04,0x78,0x00,	// xDDxPHD.<@@8..x. //
	0x7C,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x44,0x44,0x44,0x44,0x44,0x44,0x38,0x00,	// |.......DDDDDD8. //
	0x44,0x44,0x44,0x44,0x44,0x28,0x10,0x00,0x44,0x44,0x44,0x44,0x54,0x54,0x28,0x00,	// DDDDD(..DDDDTT(. //
	0x44,0x44,0x28,0x10,0x10,0x28,0x44,0x00,0x44,0x44,0x44,0x28,0x10,0x10,0x10,0x00,	// DD(..(D.DDD(.... //
	0x7C,0x04,0x08,0x10,0x20,0x40,0x7C,0x00,0x00,0x38,0x20,0x20,0x20,0x20,0x38,0x00,	// |... @|..8    8. //
	0x00,0x00,0x40,0x20,0x10,0x08,0x04,0x00,0x00,0x38,0x08,0x08,0x08,0x08,0x38,0x00,	// ..@ .....8....8. //
	0x00,0x10,0x28,0x44,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7C,0x00,	// ..(D..........|. //
	0x20,0x10,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x38,0x04,0x3C,0x44,0x3C,0x00,	//  .........8.<D<. //
	0x40,0x40,0x78,0x44,0x44,0x44,0x78,0x00,0x00,0x00,0x38,0x44,0x40,0x40,0x38,0x00,	// @@xDDDx...8D@@8. //
	0x04,0x04,0x3C,0x44,0x44,0x44,0x3C,0x00,0x00,0x00,0x38,0x44,0x7C,0x40,0x38,0x00,	// ..<DDD<...8D|@8. //
	0x0C,0x10,0x38,0x10,0x10,0x10,0x10,0x00,0x00,0x00,0x3C,0x44,0x44,0x3C,0x04,0x38,	// ..8.......<DD<.8 //
	0x40,0x40,0x78,0x44,0x44,0x44,0x44,0x00,0x10,0x00,0x10,0x10,0x10,0x10,0x38,0x00,	// @@xDDDD.......8. //
	0x08,0x00,0x08,0x08,0x08,0x08,0x48,0x30,0x40,0x40,0x44,0x48,0x70,0x48,0x44,0x00,	// ......H0@@DHpHD. //
	0x30,0x10,0x10,0x10,0x10,0x10,0x38,0x00,0x00,0x00,0x68,0x54,0x54,0x54,0x54,0x00,	// 0.....8...hTTTT. //
	0x00,0x00,0x58,0x64,0x44,0x44,0x44,0x00,0x00,0x00,0x38,0x44,0x44,0x44,0x38,0x00,	// ..XdDDD...8DDD8. //
	0x00,0x00,0x78,0x44,0x44,0x44,0x78,0x40,0x00,0x00,0x3C,0x44,0x44,0x44,0x3C,0x04,	// ..xDDDx@..<DDD<. //
	0x00,0x00,0x28,0x34,0x20,0x20,0x20,0x00,0x00,0x00,0x3C,0x40,0x38,0x04,0x78,0x00,	// ..(4   ...<@8.x. //
	0x00,0x10,0x38,0x10,0x10,0x10,0x0C,0x00,0x00,0x00,0x44,0x44,0x44,0x4C,0x34,0x00,	// ..8.......DDDL4. //
	0x00,0x00,0x44,0x44,0x44,0x28,0x10,0x00,0x00,0x00,0x54,0x54,0x54,0x54,0x28,0x00,	// ..DDD(....TTTT(. //
	0x00,0x00,0x44,0x28,0x10,0x28,0x44,0x00,0x00,0x00,0x44,0x44,0x44,0x3C,0x04,0x38,	// ..D(.(D...DDD<.8 //
	0x00,0x00,0x7C,0x08,0x10,0x20,0x7C,0x00,0x00,0x0C,0x10,0x10,0x20,0x10,0x10,0x0C,	// ..|.. |..... ... //
	0x00,0x10,0x10,0x10,0x00,0x10,0x10,0x10,0x00,0x60,0x10,0x10,0x08,0x10,0x10,0x60,	// .........`.....` //
	0x00,0x00,0x20,0x54,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,	// .. T............ //
};

// Size of data in above array (Array may be padded but this will be correct)
#define SIZE_OF_CHARA1 760

#endif

void bm_consolefont() {
  // load the charset from grom
  // then copy those patterns out to RAM
#ifdef TI99
	// TODO: we can do better here and go from GROM straight to RAM
	charset();
	vdpmemread(gPattern + (8 * 32), bmFont, BM_FONT_SIZE);
	gBmFont = bmFont;
#endif
#ifdef COLECO
	// just point the pointer at ROM
	// TODO: not tested - code assumes first character is space
	#define COLECO_FONT (unsigned char*)0x15A3
	gBmFont = COLECO_FONT;
#endif
#ifdef GBA
    // TODO this is to get the character set in RAM for bitmap mode
    // But we aren't supporting bitmap mode anyway
    gBmFont = (unsigned char*)0;
#endif
#ifdef CLASSIC99
    gBmFont = CHARA1;
#endif
}



